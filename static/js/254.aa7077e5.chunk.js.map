{"version":3,"file":"static/js/254.aa7077e5.chunk.js","mappings":"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","sources":["webpack://react-app/./src/components/CurrentPath/CurrentPath.module.css?1be0","components/CurrentPath/CurrentPath.js","webpack://react-app/./src/components/StandaloneSection/StandaloneSection.module.css?e4f0","components/StandaloneSection/StandaloneSection.js","hooks/useDocumentTitle.js","webpack://react-app/./src/components/PayBox/PayBox.module.css?bf0e","components/PayBox/PayBox.js","webpack://react-app/./src/components/CheckoutProductsList/CheckoutProductsList.module.css?ceec","components/CheckoutProductsList/CheckoutProductsList.js","pages/Checkout/Checkout.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"background\":\"CurrentPath_background__2hm4n\",\"container\":\"CurrentPath_container__+tMHC\",\"link\":\"CurrentPath_link__ze6e4\"};","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, useRouteMatch } from 'react-router-dom';\r\nimport css from './CurrentPath.module.css';\r\n\r\nfunction CurrentPath({ lastPathName }) {\r\n  const { path } = useRouteMatch();\r\n\r\n  const paths = path.split('/').filter(isTruthy => isTruthy);\r\n  if(lastPathName)\r\n    paths[paths.length - 1] = lastPathName;\r\n\r\n  const pathElements = [<Fragment key=\"a\"><Link to=\"/\" className={css['link']}>home</Link> / </Fragment>];\r\n\r\n  for(let i = 0; i < paths.length; i++) {\r\n    if(i < paths.length - 1) {\r\n      pathElements.push(\r\n        <Fragment key={i}>\r\n          <Link to={`/${paths[i]}`} className={css['link']}>{paths[i]}</Link> /\r\n        </Fragment>\r\n      );\r\n    } else {\r\n      pathElements.push(\r\n        <span key={i}>{paths[i]}</span>\r\n      );\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className={css['background']}>\r\n      <div data-testid=\"paths-container\" className={css['container']}>\r\n        {pathElements}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nCurrentPath.propTypes = {\r\n  lastPathName: PropTypes.string\r\n};\r\n\r\nexport default CurrentPath;","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"StandaloneSection_section__RmZHy\",\"section--background-1\":\"StandaloneSection_section--background-1__6ph7+\",\"section--background-2\":\"StandaloneSection_section--background-2__t-Sui\",\"section--centered\":\"StandaloneSection_section--centered__2+-69\",\"section--protruding\":\"StandaloneSection_section--protruding__TFIQo\"};","import React from 'react';\r\nimport css from './StandaloneSection.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction StandaloneSection({ children, backgroundID, isProtruding, isCentered, isSemanticSection }) {\r\n  let sectionClasses = css['section'];\r\n  sectionClasses += (backgroundID ? ` ${css[`section--background-${backgroundID}`]}` : '');\r\n  sectionClasses += (isProtruding ? ` ${css[`section--protruding`]}` : '');\r\n  sectionClasses += (isCentered ? ` ${css[`section--centered`]}` : '');\r\n  \r\n  if(isSemanticSection)\r\n    return (\r\n      <section className={sectionClasses}>\r\n        <div className=\"max-width\">\r\n          {children}\r\n        </div>\r\n      </section>\r\n    );\r\n  \r\n  return (\r\n    <div className={sectionClasses}>\r\n      <div className=\"max-width\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nStandaloneSection.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  backgroundID: PropTypes.number,\r\n  isProtruding: PropTypes.bool,\r\n  isCentered: PropTypes.bool,\r\n  isSemanticSection: PropTypes.bool,\r\n};\r\n\r\nexport default StandaloneSection;","import { useEffect } from 'react';\r\n\r\nfunction useDocumentTitle(title) {\r\n  useEffect(() => {\r\n    if(!title)\r\n      document.title = 'Comfy Sloth';\r\n    else\r\n      document.title = `Comfy Sloth | ${title}`;\r\n  }, [title]);\r\n}\r\n\r\nexport default useDocumentTitle;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PayBox_container__VOBbo\",\"input\":\"PayBox_input__5ae2B\",\"input--number\":\"PayBox_input--number__xqZV-\",\"input--submit\":\"PayBox_input--submit__KxMns\"};","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport css from './PayBox.module.css';\r\n\r\nfunction PayBox({ onSubmit }) {\r\n  const [cardNumber, setCardNumber] = useState('');\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    onSubmit();\r\n  }\r\n  \r\n  function handleChange(event) {\r\n    const { value } = event.target;\r\n\r\n    if((value && !Number.isInteger(Number(value))) || value.includes('.'))\r\n      return;\r\n\r\n    setCardNumber(value);\r\n  }\r\n  \r\n  return (\r\n    <form \r\n      className={css['container']}\r\n      onSubmit={handleSubmit}\r\n    >\r\n\r\n      <input\r\n        className={`${css['input']} ${css['input--number']}`}\r\n        type=\"text\"\r\n        placeholder=\"12345\"\r\n        aria-label=\"Card number.\"\r\n        value={cardNumber}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <button\r\n        className={`${css['input']} ${css['input--submit']}`}\r\n        disabled={!cardNumber || !Number.isInteger(Number(cardNumber))}\r\n      >\r\n        Pay\r\n      </button>\r\n\r\n    </form>\r\n  );\r\n}\r\n\r\nPayBox.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired\r\n};\r\n\r\nexport default PayBox;","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"CheckoutProductsList_list__F5N0z\"};","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport css from './CheckoutProductsList.module.css';\r\nimport { useCartContext } from '../../utils/CartContext';\r\nimport { getColorName } from '../../utils/utils';\r\n\r\nfunction CheckoutProductsList() {\r\n  const { cartProductsData } = useCartContext();\r\n\r\n  return (\r\n    <ul className={css['list']}>\r\n      { \r\n        cartProductsData.map(product => \r\n          <li key={product.id + product.color}>\r\n            <Link to={`/products/${product.id}`} target=\"_blank\" className=\"cool-link cool-link--capitalize\">{product.name}</Link> ({getColorName(product.color)}) x{product.count}\r\n          </li>)\r\n      }\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default CheckoutProductsList;","import React, { useEffect, useState } from 'react';\r\nimport { Link } from  'react-router-dom';\r\nimport StandaloneSection from '../../components/StandaloneSection/StandaloneSection';\r\nimport CurrentPath from '../../components/CurrentPath/CurrentPath';\r\nimport Dialog from '../../components/Dialog/Dialog';\r\nimport { useAuthContext } from '../../utils/AuthContext';\r\nimport { useCartContext } from '../../utils/CartContext';\r\nimport PayBox from '../../components/PayBox/PayBox';\r\nimport Loading from '../../components/Loading/Loading';\r\nimport useDocumentTitle from '../../hooks/useDocumentTitle';\r\nimport CheckoutProductsList from '../../components/CheckoutProductsList/CheckoutProductsList';\r\nimport { stringifyPrice } from '../../utils/utils';\r\n\r\nfunction Checkout() {\r\n  useDocumentTitle('Checkout');\r\n  const { username, isLoggedIn, isReady: isAuthReady } = useAuthContext();\r\n  const { cartProductsData, totalPrice, cartEmpty, overflowingProducts, requireFullData, readyPhase: cartReadyPhase } = useCartContext();\r\n  const [hasPaid, setHasPaid] = useState(false);\r\n  const [showDialog, setShowDialog] = useState(false);\r\n  useEffect(() => requireFullData(), [requireFullData]);\r\n  \r\n  let content = <div></div>;\r\n\r\n  if(!isAuthReady || cartReadyPhase.name !== 'all-fetched') {\r\n    content = (\r\n      <div>\r\n        <h1 className=\"heading heading--only-bottom-margin heading--medium\">Please, wait for a second...</h1>\r\n        <p className=\"paragraph paragraph--color-1\">We need to get required data.</p>\r\n        <Loading/>\r\n      </div>\r\n    );\r\n  }\r\n  else if(!isLoggedIn) {\r\n    content = (\r\n      <>\r\n        <h1 className=\"heading heading--only-bottom-margin heading--medium\">You have to log in to be able to buy our products.</h1>\r\n        <Link to=\"/login\" className=\"button button--uppercase\">Login</Link>\r\n      </>\r\n    );\r\n  }\r\n  else if(hasPaid) {\r\n    content = (\r\n      <>\r\n        <h1 className=\"heading heading--small heading--no-margin\">Thank you!</h1>\r\n        <p className=\"paragraph paragraph--color-1\">Your products will be shipped to you within 3 working days.</p>\r\n        <Link to=\"/\" className=\"button button--uppercase\">Go back to the homepage</Link>\r\n      </>\r\n    );\r\n  }\r\n  else if(!cartProductsData.length) {\r\n    content = (\r\n      <>\r\n        <h1 className=\"heading heading--only-bottom-margin heading--medium\">Nothing in your cart yet.</h1>\r\n        <Link to=\"/products\" className=\"button button--uppercase\">See what&apos;s in stock</Link>\r\n      </>\r\n    );\r\n  }\r\n  else if(cartProductsData.find(product => product.data?.isError)) {\r\n    content = (\r\n      <div>\r\n        <h1 className=\"heading heading--only-bottom-margin heading--medium\">Oh no!</h1>\r\n        <p className=\"paragraph paragraph--color-1\">We are unable to get required data about the products you have ordered. Please, refresh the page or try again later.</p>\r\n        <button className='button' onClick={() => location.reload()}>Refresh</button>\r\n      </div>\r\n    );\r\n  }\r\n  else if(overflowingProducts.length) {\r\n    content = (\r\n      <>\r\n        <h1 className=\"heading heading--only-bottom-margin heading--medium\">Oops... looks like you are trying to buy more than we have in our stock.</h1>\r\n        <p className=\"paragraph paragraph--color-1\">Please, go to your cart and remove given amounts of these products:</p>\r\n        <ul>\r\n          {\r\n            overflowingProducts.map(item => (\r\n              <li key={item.id}>\r\n                You have {item.overflow} <Link to={`/products/${item.id}`}>{item.name}</Link> more in your cart than we have in our stock.\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n  else if(totalPrice) {\r\n    const priceString = stringifyPrice(totalPrice.products + totalPrice.shipping);\r\n    content = (\r\n      <>\r\n        <Dialog\r\n          isShown={showDialog}\r\n          heading=\"Are you sure?\"\r\n          message={`You will have to pay ${priceString}.`}\r\n          onConfirm={() => { setShowDialog(false); setHasPaid(true); cartEmpty(); }}\r\n          onReject={() => setShowDialog(false)}\r\n        />\r\n\r\n        <h1 className=\"heading heading--small heading--no-margin\">Hello, {username}!</h1>\r\n        <p className=\"paragraph paragraph--color-1\">Your total is {priceString}</p>\r\n        <CheckoutProductsList/>\r\n        <PayBox onSubmit={() => setShowDialog(prev => !prev)}/>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n\r\n      <CurrentPath/>\r\n\r\n      <StandaloneSection isCentered={true}>\r\n        {content}\r\n      </StandaloneSection>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checkout;"],"names":["lastPathName","paths","useRouteMatch","path","split","filter","isTruthy","length","pathElements","Fragment","to","className","css","i","push","children","backgroundID","isProtruding","isCentered","isSemanticSection","sectionClasses","title","useEffect","document","onSubmit","useState","cardNumber","setCardNumber","event","preventDefault","type","placeholder","value","onChange","target","Number","isInteger","includes","disabled","cartProductsData","useCartContext","map","product","id","name","getColorName","color","count","useDocumentTitle","useAuthContext","username","isLoggedIn","isAuthReady","isReady","totalPrice","cartEmpty","overflowingProducts","requireFullData","cartReadyPhase","readyPhase","hasPaid","setHasPaid","showDialog","setShowDialog","content","find","data","isError","onClick","location","reload","item","overflow","priceString","stringifyPrice","products","shipping","Dialog","isShown","heading","message","onConfirm","onReject","prev","Loading","CurrentPath","StandaloneSection"],"sourceRoot":""}